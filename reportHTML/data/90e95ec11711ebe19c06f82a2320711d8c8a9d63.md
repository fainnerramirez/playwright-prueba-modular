# Test info

- Name: página de avianca >> test flujos de avianca
- Location: C:\Users\framir02\projects\avianca\automatizacion\playwright-modular\tests\avianca.spec.ts:4:9

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for locator('button:has-text("Continuar")')
    - locator resolved to <button _ngcontent-iay-c8="" class="button amount-summary_button amount-summary_button-action ng-star-inserted">…</button>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <div role="alert" aria-live="assertive" class="page-loader ng-star-inserted">…</div> from <notification-container ng-version="7.2.16" data-module-path="app/custom-modules/common/NotificationContainer/notification-container/notification-container.custom.module#NotificationContainerCustomModule" data-initial-value="{"isCookieLanguageActive":true,"translations":{"37935":"37935 - Los asientos y/o servicios en la orden no han sido modificados después de la creación del TSM.\n","1-DependencyMissingException":"1 - Se ha producido un error. Por favor, inténtalo de nuevo o ponte en contacto con nuestro centro de a…>…</notification-container> subtree intercepts pointer events
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <div role="alert" aria-live="assertive" class="page-loader ng-star-inserted">…</div> from <notification-container ng-version="7.2.16" data-module-path="app/custom-modules/common/NotificationContainer/notification-container/notification-container.custom.module#NotificationContainerCustomModule" data-initial-value="{"isCookieLanguageActive":true,"translations":{"37935":"37935 - Los asientos y/o servicios en la orden no han sido modificados después de la creación del TSM.\n","1-DependencyMissingException":"1 - Se ha producido un error. Por favor, inténtalo de nuevo o ponte en contacto con nuestro centro de a…>…</notification-container> subtree intercepts pointer events
    - retrying click action
      - waiting 100ms
    14 × waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <div role="alert" aria-live="assertive" class="page-loader ng-star-inserted">…</div> from <notification-container ng-version="7.2.16" data-module-path="app/custom-modules/common/NotificationContainer/notification-container/notification-container.custom.module#NotificationContainerCustomModule" data-initial-value="{"isCookieLanguageActive":true,"translations":{"37935":"37935 - Los asientos y/o servicios en la orden no han sido modificados después de la creación del TSM.\n","1-DependencyMissingException":"1 - Se ha producido un error. Por favor, inténtalo de nuevo o ponte en contacto con nuestro centro de a…>…</notification-container> subtree intercepts pointer events
     - retrying click action
       - waiting 500ms

    at Page.page.seatingPageAvianca (C:\Users\framir02\projects\avianca\automatizacion\playwright-modular\utils\test-extends.ts:340:64)
    at C:\Users\framir02\projects\avianca\automatizacion\playwright-modular\tests\avianca.spec.ts:10:9
```

# Page snapshot

```yaml
- link "Skip to main content":
  - /url: "#maincontent"
- banner:
  - img "Common.LogoAltText"
- main:
  - region "Basket.Section_AriaLabel":
    - text: Barranquilla BAQ A Bogotá BOG  mié. 14 may. 2025  mar. 20 may. 2025
    - list:
      - text: 
      - listitem: 1 Adulto ,
      - listitem: 1 Joven ,
      - listitem: 1 Niño ,
      - listitem: 1 Bebé
    - text: Paso 4 de 5
    - progressbar
    - button "Total  COP 1.628.140 "
  - region
  - heading "Selecciona tus asientos" [level=2]
  - paragraph: Elige como quieres volar, ventana, pasillo o centro
  - text: Barranquilla - a Bogotá
  - tablist:
    - tab " BAQ a BOG" [expanded] [selected]:
      - text:  BAQ
      - img "a": "-"
      - text: BOG
    - tab " BOG a BAQ":
      - text:  BOG
      - img "a": "-"
      - text: BAQ
  - button "SH Adulto 1 Susan Brown Hernandez Seleccionar asiento"
  - button "DG Joven 1 David Hernandez Gomez Agregar asiento"
  - button "SH Niño 1 Susan Brown Hernandez Agregar asiento"
  - list:
    - listitem: Asiento seleccionado COP
    - listitem:  Asiento no disponible COP
  - text: Precio total asientos COP 0
  - button "Volver"
  - button "Ir a pagar"
- alert
```

# Test source

```ts
  240 |                             });
  241 |                             element.dispatchEvent(eventFocus);
  242 |                             setTimeout(() => {
  243 |                                 element.dispatchEvent(eventBlur);
  244 |                                 Array.from(containers).forEach(e => { e.classList.remove("is-focused") });
  245 |                             }, 100);
  246 |                         }
  247 |                     });
  248 |
  249 |                     const fieldAuthoritation = document.querySelector("#acceptNewCheckbox") as HTMLInputElement;
  250 |                     if (fieldAuthoritation) fieldAuthoritation.checked = true;
  251 |                 }
  252 |                 setValuesDefaultAutoForm();
  253 |             });
  254 |         }
  255 |
  256 |         page.configInitialTest = async (): Promise<void> => {
  257 |             page.setDefaultTimeout(25_000);
  258 |             await page.addInitScript(() => {
  259 |                 Object.defineProperty(navigator, 'webdriver', {
  260 |                     get: () => false,
  261 |                 });
  262 |             });
  263 |
  264 |             await page.goto('https://www.avianca.com/');
  265 |             await page.takeScreenshot('página-principal-avianca');
  266 |             await page.verifyCookies();
  267 |         }
  268 |
  269 |         //#endregion
  270 |
  271 |         //#region páginas o flujos de avianca
  272 |         page.homePageAvianca = async (): Promise<void> => {
  273 |             await page.selectOriginFlight();
  274 |             await page.takeScreenshot('seleccion-ciudad-origen');
  275 |             await page.selectDestinationFlight();
  276 |             await page.takeScreenshot('seleccion-ciudad-destino');
  277 |             await page.selectDateInitFlight();
  278 |             await page.takeScreenshot('seleccion-fecha-ida');
  279 |             await page.selectDateEndFlight();
  280 |             await page.takeScreenshot('seleccion-fecha-vuelta');
  281 |             await page.selectPassengers();
  282 |             await page.takeScreenshot('seleccion-pasajeros');
  283 |             await page.selectButtonAndClick("#searchButton");
  284 |             await page.takeScreenshot('busqueda-resultados-vuelos');
  285 |             await page.waitForSelector("#pageWrap");
  286 |         }
  287 |
  288 |         page.flightPageAvianca = async (): Promise<void> => {
  289 |             await page.selectFlightsOneWay();
  290 |             await page.takeScreenshot('seleccion-vuelo-ida');
  291 |             await page.selectFlightReturns();
  292 |             await page.takeScreenshot("seleccion-vuelo-regreso");
  293 |             await page.waitForTimeout(500);
  294 |             await page.takeScreenshot('resumen-de-vuelos-seleccionados');
  295 |             await page.selectButtonAndClick(".button.page_button.btn-action");
  296 |         }
  297 |
  298 |         page.passengerPageAvianca = async (): Promise<void> => {
  299 |             await page.takeScreenshot("inicio-de-llenado-pagina-de-pasajeros");
  300 |             await page.fillFieldsPassenger();
  301 |             await page.waitForTimeout(1500);
  302 |             await page.takeScreenshot("llenado-de-pasajeros-ok");
  303 |             const continueButton = page.locator(".button.page_button.btn-action");
  304 |             await expect(continueButton.last()).toBeVisible();
  305 |             await continueButton.last().click();
  306 |         }
  307 |
  308 |         page.servicesPageAvianca = async (): Promise<void> => {
  309 |
  310 |             await page.waitForSelector(".main-banner--section-offer");
  311 |             await page.waitForTimeout(8000);
  312 |             await page.takeScreenshot("Pagina-de-servicios");
  313 |
  314 |             const continueServices = page.locator(".button.page_button.btn-action");
  315 |             await expect(continueServices.last()).toBeVisible();
  316 |             await continueServices.last().click();
  317 |
  318 |             const upsellService = await page.locator('.terciary-button').last().isVisible()
  319 |
  320 |             if (upsellService) {
  321 |                 await page.locator('.terciary-button').last().click();
  322 |             }
  323 |
  324 |         }
  325 |
  326 |         page.seatingPageAvianca = async (): Promise<void> => {
  327 |             await page.takeScreenshot("Pagina-de-seleccion-asientos");
  328 |             const pasajeros = page.locator(".pax-selector_pax-avatar");
  329 |
  330 |             for (const e of await pasajeros.all()) {
  331 |                 await page.takeScreenshot("seleccion-asiento");
  332 |                 await expect(page.locator(".seat-number").first()).toBeVisible();
  333 |                 await page.locator('.seat-number').first().click();
  334 |                 await page.waitForTimeout(8000);
  335 |             }
  336 |
  337 |             // Verificar que existe el botón Continuar
  338 |             await expect(page.locator('button:has-text("Continuar")')).toBeVisible();
  339 |             // Hacer clic en el botón Continuar
> 340 |             await page.locator('button:has-text("Continuar")').click();
      |                                                                ^ Error: locator.click: Test timeout of 60000ms exceeded.
  341 |
  342 |             // Esperar que cargue la página del siguiente vuelo (vuelta)
  343 |             await page.waitForTimeout(5000);
  344 |             await page.takeScreenshot("seleccion-asiento-vuelta");
  345 |             await page.locator('.next-flight-code').click();
  346 |
  347 |             const pasajerosVuelta = page.locator(".pax-selector_pax-avatar")
  348 |
  349 |             for (const j of await pasajerosVuelta.all()) {
  350 |                 await page.takeScreenshot("seleccion-asiento");
  351 |                 await expect(page.locator(".seat-number").first()).toBeVisible();
  352 |                 await page.locator('.seat-number').first().click();
  353 |                 await page.waitForTimeout(8000);
  354 |             }
  355 |
  356 |             await page.waitForTimeout(8000);
  357 |         }
  358 |
  359 |         //#endregion
  360 |
  361 |         await use(page);
  362 |     }
  363 | });
  364 |
  365 | export { expect } from '@playwright/test';
```